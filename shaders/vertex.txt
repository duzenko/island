#version 130

uniform mat4 modelMatrix, viewProjectionMatrix;
uniform mat4 shadowMatrix;

in vec3 vpos;
in vec2 vtex;
in vec3 vnorm;

out vec4 spos;
out vec3 fnorm;
out vec2 ftex;

void main() {
  ftex = vtex;
  fnorm = vnorm;//(viewProjectionMatrix*modelMatrix*vec4(vnorm, 0)).xyz;
  fnorm = normalize(modelMatrix*vec4(vnorm, 0)).xyz;
  vec4 fpos = viewProjectionMatrix*modelMatrix*vec4(vpos, 1);
  spos = shadowMatrix*modelMatrix*vec4(vpos, 1);
  gl_Position = fpos;
}
